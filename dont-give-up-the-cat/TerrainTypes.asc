// new module script

TerrainType GetTerrainAtRoomXY(int x, int y)
{
  TerrainType current_terrain;
  Region* reg = Region.GetAtRoomXY(x, y);
  
  if(reg == null) current_terrain = eTT_Water;
  else current_terrain = reg.ID;
  
  if(current_terrain == 0) return eTT_Water;
  
  return current_terrain;
}

bool IsWallAtRoomXY(int x, int y)
{
  TerrainType current_terrain;
  Region* reg = Region.GetAtRoomXY(x, y);
  
  if(reg == null) current_terrain = 0;
  else current_terrain = reg.ID;
    
  return current_terrain == 0 || current_terrain == eTT_Water || current_terrain == eTT_TreeHeavy;
}

int SpriteFromTerrainType(TerrainType terrain_type)
{  
  int gfx;
  if(terrain_type == eTT_Land) {
    gfx = SPR_GRASS_LOW;
  } else if(terrain_type == eTT_LandBorder) {
    gfx = SPR_GRASS_HIGH;      
  } else if(terrain_type == eTT_Tree) {
    int rnd = Random(15);
    gfx = SPR_GRASS_HIGH;
    if(rnd == 4) gfx = SPR_TREE_SMALL;
    if(rnd == 5) gfx = SPR_TREE_BIG;
  } else if(terrain_type == eTT_Flowers) {
    int rnd = Random(2);
    gfx = SPR_FLOWER_0 + rnd;
  } else if(terrain_type == eTT_FlowersBlue) {
    int rnd = Random(1);
    gfx = SPR_FLOWER_BLUE_0 + rnd;
  } else if(terrain_type == eTT_BlueRock) {
    int rnd = Random(2);
    gfx = SPR_BLUEROCK_1;
    if(rnd == 1) gfx = SPR_BLUEROCK_0;
  } else if(terrain_type == eTT_GrassyRock) {
    int rnd = Random(3);
    gfx = SPR_GRASSYROCK;
    if(rnd == 3) gfx = SPR_GRASS_HIGH;      
  } else {
    int rnd = Random(2);
    gfx = SPR_GRASS_HIGH;
    if(rnd == 2) gfx = SPR_TREE_SMALL;
    if(rnd == 1) gfx = SPR_TREE_BIG;       
  } 
  return gfx;
}